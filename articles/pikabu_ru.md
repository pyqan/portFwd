# Написал программу, чтобы не сойти с ума от Kubernetes

Всем привет! Расскажу историю о том, как я устал от рутины и написал инструмент, который теперь экономит мне кучу нервов.

## Предыстория

Работаю с Kubernetes — это такая штука для запуска приложений в контейнерах (если кто не в теме). И есть там одна операция, которую приходится делать постоянно — **port-forward**. 

Суть: у тебя в кластере крутится база данных, и чтобы к ней подключиться с ноута, нужно "пробросить" порт. Команда выглядит так:

```
kubectl port-forward svc/postgres 5432:5432 -n database
```

И эта команда занимает терминал, пока работает соединение.

## Проблема

А теперь представьте типичный рабочий день:
- Нужна база данных — открываем терминал, пишем команду
- Нужен Redis — ещё терминал
- Нужен API сервис — ещё терминал
- Нужен фронтенд для дебага — ещё терминал

К обеду у тебя 8 терминалов, и ты уже не помнишь какой за что отвечает. А потом одно соединение падает, и ты такой: "Так, где там был постгрес... этот? или этот? чёрт..."

## Решение

Короче, в один прекрасный вечер я сел и написал **PortFwd** — менеджер для всех этих соединений.

### Что умеет:

**1. Все форварды в одном окне**

```
┌─ Соединения ─────────────────────────────────┐
│ ● postgres                    5432 → 5432    │
│ ● redis                       6379 → 6379    │
│ ○ api-server (остановлен)     3000 → 3000    │
│ ✗ frontend (ошибка)           8080 → 80      │
└──────────────────────────────────────────────┘
```

Зелёная точка — работает, серая — остановлен, крестик — ошибка. Всё понятно с первого взгляда.

**2. Выбор мышкой... то есть стрелками**

Никаких команд! Стрелками выбираешь namespace, потом под или сервис, вводишь порты — готово.

**3. Запоминает всё**

Закрыл программу — при следующем запуске все соединения на месте. Активные сами переподключатся, остановленные — останутся в списке.

**4. Умная работа с сервисами**

Выбрал сервис с портом 80, а внутри пода приложение слушает 8000? Программа сама разберётся и подключится куда надо.

### Как выглядит

Запускаешь в терминале:
```
./portfwd
```

И получаешь красивый интерфейс:

- `n` — новое соединение
- `d` — отключить выбранное
- `r` — переподключить
- `l` — посмотреть логи соединения
- `?` — справка
- `q` — выход

### Написано на Go

Использует официальный клиент Kubernetes, так что работает точно так же надёжно, как стандартный kubectl.

## Итого

Потратил несколько вечеров, зато теперь:
- Один терминал вместо десяти
- Вижу статус всех соединений
- Не теряю настройки при перезапуске
- Коллегам не надо диктовать команды — просто "поставь portfwd"

## Ссылка

Код открытый, можете пользоваться: [GitHub](https://github.com/pyqan/portFwd)

Если кто работает с Kubernetes — попробуйте, мне интересен фидбек!

---

P.S. Если есть вопросы по Kubernetes или Go — спрашивайте в комментах, постараюсь ответить.

*Теги: IT, программирование, Kubernetes, DevOps, свой проект*
